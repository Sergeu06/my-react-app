/* --- –û—Å–Ω–æ–≤–Ω–æ–π —Å—Ç–∏–ª—å —Ä—É–∫–∏ –∏–≥—Ä–æ–∫–∞ —Å –∫–∞—Ä—Ç–∞–º–∏ --- */
.player-hand {
  display: flex;
  justify-content: center;
  align-items: flex-end;
  gap: 28px;
  width: 80vw; /* –ò—Å–ø–æ–ª—å–∑—É–µ–º vw –¥–ª—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–≥–æ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è –ø–æ —à–∏—Ä–∏–Ω–µ —ç–∫—Ä–∞–Ω–∞ */
  max-width: 1200px; /* –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π —à–∏—Ä–∏–Ω—ã */
  overflow: visible;
  pointer-events: auto;
}

.card-in-hand-wrapper {
  position: relative;
  max-width: calc((100% - 8px * 4) / 5);
  min-width: 48px;
  width: 18vw; /* –ö–∞—Ä—Ç–∞ –∑–∞–Ω–∏–º–∞–µ—Ç ~16% —à–∏—Ä–∏–Ω—ã —ç–∫—Ä–∞–Ω–∞ ‚Äî —Ä–µ–≥—É–ª–∏—Ä—É–π—Ç–µ */
  max-width: 140px; /* –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –∫–∞—Ä—Ç—ã */
  transition: transform 0.15s cubic-bezier(0.4, 0, 0.2, 1);
  cursor: pointer;
  border-radius: 4px; /* üëà –°–æ–≤–ø–∞–¥–∞–µ—Ç —Å .card-in-hand-wrapper */
}

.card-in-hand-wrapper:hover {
  transform: translateY(-20px) scale(1.1) rotateZ(8deg);
  z-index: 3;
  box-shadow: 0 0 20px rgba(255, 165, 0, 0.7);
  transition: transform 0.1s cubic-bezier(0.4, 0, 0.2, 1),
    box-shadow 0.2s ease-in-out;
}

.card-in-hand-image {
  width: 100%;
  height: 100%;
  border-radius: 8px;
  object-fit: contain;
  user-select: none;
  pointer-events: none;
  background-color: #1e1e1e; /* –¢–µ–º–Ω—ã–π —Ñ–æ–Ω */
  box-shadow: 0 0 12px rgba(255, 165, 0, 0.4);
  transition: box-shadow 0.3s ease-in-out;
}

/* –£–≥–ª–æ–≤—ã–µ –±–ª–æ–∫–∏ —Å —Ü–µ–Ω–æ–π –∏ —É—Ä–æ–Ω–æ–º */
.card-corner {
  position: absolute;
  font-weight: bold;
  font-size: 1em;
  padding: 0.2em 0.5em;
  border-radius: 6px;
  user-select: none;
  pointer-events: none;
  text-shadow: 2px 2px 3px #000;
  color: #fff;
  white-space: nowrap;
  z-index: 5;
}

.card-corner.cost {
  position: absolute;
  color: #00ff00;
  top: -4px;
  left: -5px;
  font-weight: 700;
  font-size: 0.8em; /* –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ —Ä–∞–∑–º–µ—Ä–∞ —Ä–æ–¥–∏—Ç–µ–ª—è */
  padding: 0.4vh 1.2vw;
}

.card-corner.damage,
.card-corner.damage_over_time {
  color: #ff4444 !important; /* –∫—Ä–∞—Å–Ω—ã–π */
}

.card-corner.damage_multiplier {
  color: #cc66ff !important; /* —Ñ–∏–æ–ª–µ—Ç–æ–≤—ã–π */
}

.card-corner.top-left {
  top: 6px;
  left: 6px;
}
.card-corner.top-right {
  top: 6px;
  right: 6px;
}
.card-corner.bottom-left {
  bottom: 6px;
  left: 6px;
}

/* –ö–Ω–æ–ø–∫–∞ ¬´–ò–≥—Ä–∞—Ç—å –∫–∞—Ä—Ç—É¬ª */
.play-card-button {
  position: absolute;
  bottom: calc(100% + 8px);
  left: 50%;
  transform: translateX(-50%);
  background: linear-gradient(145deg, #2e2e2e, #3d3d3d);
  color: #f5f5f5;
  font-weight: bold;
  font-size: 14px;
  padding: 6px 14px;
  border-radius: 6px;
  border: 2px solid #00000022;
  z-index: 20;
  display: block;
  opacity: 1;
  animation: popIn 0.15s ease-out;
}
.play-card-button:hover {
  background: linear-gradient(145deg, #3d3d3d, #2e2e2e);
  transform: translateX(-50%) scale(1.08);
  box-shadow: 0 8px 16px rgba(0, 0, 0, 0.5);
}

@keyframes popIn {
  0% {
    opacity: 0;
    transform: translateX(-50%) scale(0.85);
  }
  100% {
    opacity: 1;
    transform: translateX(-50%) scale(1);
  }
}

/* –í—ã–¥–µ–ª–µ–Ω–Ω–∞—è –∫–∞—Ä—Ç–∞ */
.card-in-hand-wrapper.selected {
  z-index: 5;
  transform: translateY(-14px) scale(1.15) rotateZ(3deg);
  box-shadow: 0 0 18px 5px #ffa500cc;
  transition: transform 0.1s ease, box-shadow 0.2s ease;
}

/* --- –ù–æ–≤–∞—è –¥–∏–Ω–∞–º–∏—á–Ω–∞—è –∞–Ω–∏–º–∞—Ü–∏—è –∞—Ç–∞–∫–∏ –±–æ—Å—Å–∞ --- */
.playing-card-fly {
  position: fixed;
  width: 140px; /* —á—É—Ç—å –±–æ–ª—å—à–µ –¥–ª—è —ç—Ñ—Ñ–µ–∫—Ç–∞ */
  height: auto;
  border-radius: 12px;
  object-fit: contain;
  pointer-events: none;
  user-select: none;
  animation: boss-attack-dynamic 0.35s linear forwards;
  z-index: 35;
  bottom: 120px;
  left: 50%;
  transform: translateX(-50%);
  will-change: transform, opacity, filter;
  filter: drop-shadow(0 0 12px #ffa500);
}

/* –≠–Ω–µ—Ä–≥–µ—Ç–∏—á–µ—Å–∫–æ–µ —Å–≤–µ—á–µ–Ω–∏–µ —Å –º–µ—Ä—Ü–∞–Ω–∏–µ–º –∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ–º */
.playing-card-fly::before,
.playing-card-fly::after {
  content: "";
  position: absolute;
  border-radius: 50%;
  pointer-events: none;
  opacity: 0.7;
  animation-timing-function: ease-in-out;
  will-change: transform, opacity, box-shadow;
  animation-iteration-count: infinite;
}

.playing-card-fly::before {
  width: 160%;
  height: 160%;
  top: -30%;
  left: -30%;
  box-shadow: 0 0 40px 18px rgba(255, 165, 0, 0.7),
    0 0 60px 30px rgba(255, 200, 0, 0.5),
    inset 0 0 40px 20px rgba(255, 165, 0, 0.85);
  animation: pulse-glow-dynamic 0.7s ease-in-out infinite alternate;
}

.playing-card-fly::after {
  width: 250%;
  height: 250%;
  top: -75%;
  left: -75%;
  box-shadow: 0 0 50px 30px rgba(255, 165, 0, 0.4),
    0 0 90px 50px rgba(255, 220, 0, 0.25);
  animation: pulse-glow-dynamic 1.3s ease-in-out infinite alternate;
}

/* –£—Å–∏–ª–µ–Ω–Ω—ã–π –ø—É–ª—å—Å —Å–≤–µ—á–µ–Ω–∏—è */
@keyframes pulse-glow-dynamic {
  0% {
    transform: scale(0.9);
    opacity: 0.3;
    box-shadow: 0 0 40px 15px rgba(255, 165, 0, 0.6),
      0 0 60px 25px rgba(255, 200, 0, 0.45);
  }
  50% {
    transform: scale(1.15);
    opacity: 0.8;
    box-shadow: 0 0 60px 30px rgba(255, 165, 0, 1),
      0 0 80px 40px rgba(255, 230, 0, 0.6);
  }
  100% {
    transform: scale(0.95);
    opacity: 0.4;
    box-shadow: 0 0 50px 20px rgba(255, 165, 0, 0.8),
      0 0 70px 30px rgba(255, 220, 0, 0.5);
  }
}

@keyframes boss-attack-dynamic {
  0% {
    opacity: 1;
    transform: translateX(-50%) translateY(0) scale(1) rotate(0deg);
    filter: brightness(1) drop-shadow(0 0 12px #ffa500);
  }
  30% {
    /* –ü–ª–∞–≤–Ω–æ–µ –º–µ–¥–ª–µ–Ω–Ω–æ–µ –¥–≤–∏–∂–µ–Ω–∏–µ –ø–æ Y */
    transform: translateX(-50%) translateY(-120px) scale(1.1) rotate(0deg);
    filter: brightness(1.3) drop-shadow(0 0 25px #ffcc00);
    opacity: 1;
  }
  60% {
    /* –£—Å–∫–æ—Ä–µ–Ω–Ω–æ–µ –¥–≤–∏–∂–µ–Ω–∏–µ –¥–∞–ª—å—à–µ –≤–Ω–∏–∑ */
    transform: translateX(-50%) translateY(-350px) scale(1.5) rotate(0deg);
    filter: brightness(1.7) drop-shadow(0 0 45px #ff8800);
    opacity: 0.85;
  }
  85% {
    /* –ï—â—ë –±—ã—Å—Ç—Ä–µ–µ –∏ –º–∞—Å—à—Ç–∞–± —É–º–µ–Ω—å—à–∞–µ—Ç—Å—è */
    transform: translateX(-50%) translateY(-480px) scale(1.3) rotate(0deg);
    filter: brightness(1.9) drop-shadow(0 0 55px #ff6600);
    opacity: 0.5;
  }
  100% {
    /* –ö–æ–Ω–µ—Ü ‚Äî –∏—Å—á–µ–∑–Ω–æ–≤–µ–Ω–∏–µ */
    opacity: 0;
    transform: translateX(-50%) translateY(-550px) scale(0.2) rotate(0deg);
    filter: brightness(2.5) blur(3px);
  }
}

/* --- –¢—Ä—è—Å–∫–∞ —ç–∫—Ä–∞–Ω–∞ –¥–ª—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ –ø–æ–ø–∞–¥–∞–Ω–∏—è –ø–æ –±–æ—Å—Å—É --- */
.screen-shake {
  animation: shake 0.5s linear;
}

@keyframes shake {
  0% {
    transform: translate(0, 0) rotate(0deg);
  }
  10% {
    transform: translate(-5px, 5px) rotate(-1deg);
  }
  20% {
    transform: translate(5px, -5px) rotate(1deg);
  }
  30% {
    transform: translate(-5px, -5px) rotate(-1deg);
  }
  40% {
    transform: translate(5px, 5px) rotate(1deg);
  }
  50% {
    transform: translate(-3px, 3px) rotate(0deg);
  }
  60% {
    transform: translate(3px, -3px) rotate(-1deg);
  }
  70% {
    transform: translate(-3px, -3px) rotate(1deg);
  }
  80% {
    transform: translate(3px, 3px) rotate(0deg);
  }
  90% {
    transform: translate(-2px, 2px) rotate(-1deg);
  }
  100% {
    transform: translate(0, 0) rotate(0deg);
  }
}

/* --- –î–µ–∑–∞–∫—Ç–∏–≤–∞—Ü–∏—è —Ä—É–∫–∏ –∏–≥—Ä–æ–∫–∞ --- */
.player-hand[style*="pointer-events: none"] {
  cursor: default;
  opacity: 0.7;
  user-select: none;
}
