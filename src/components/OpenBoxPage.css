.open-box-page {
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 5vw 2vw;
  color: var(--text-primary);
  min-height: 100vh;
  background: var(--app-bg);
}

.box-container {
  position: relative;
  width: 100%;
  max-width: 400px;
  height: 300px;
  margin: 200px auto;
  display: flex;
  justify-content: center;
  align-items: center;
}

.plate,
.lid,
.card-reveal {
  position: absolute;
  left: 50%;
  transform: translateX(-50%);
}

.plate {
  bottom: 0;
  width: 100%;
  z-index: 1;
}

.lid {
  top: 96px;
  width: 80%;
  transition: transform 1s ease;
  z-index: 3;
}

.lid.open {
  animation: flyAway 1.4s forwards;
}

@keyframes flyAway {
  0% {
    transform: translateX(-50%) translateY(0) rotate(0);
  }
  40% {
    transform: translateX(-60%) translateY(-150px) rotate(-25deg);
  }
  100% {
    transform: translateX(-150%) translateY(-600px) rotate(-75deg);
  }
}

.card-reveal {
  position: absolute;
  top: 50%;
  left: 50%;
  width: 100%;
  height: 100%;
  transform: translate(-50%, -50%) scale(0.1);
  transform-origin: center center;
  display: flex;
  justify-content: center;
  align-items: center;
  opacity: 0;
  transition: transform 0.8s ease, opacity 0.8s ease;
  z-index: 2;
}

.card-reveal.visible {
  transform: translate(-50%, -50%) scale(1);
  opacity: 1;
}

.card-reveal .card-frame-wrapper {
  max-width: min(240px, 70vw);
}

.result-text {
  text-align: center;
  margin-top: -30vw;
  color: var(--text-primary);
}

.result-title {
  color: var(--text-muted);
}

.result-name {
  color: var(--accent-reward);
  font-weight: 700;
}

.result-chance {
  font-size: 14px;
  color: var(--text-muted);
}

.rarity-glow {
  position: absolute;
  width: 100%;
  height: 100%;
  border-radius: 50%;
  filter: blur(60px);
  z-index: 0;
  opacity: 0.5;
  pointer-events: none;
}

.rarity-common {
  background: radial-gradient(
    circle,
    rgba(49, 247, 255, 0.4) 0%,
    rgba(12, 16, 28, 0.9) 80%
  );
}

.rarity-rare {
  background: radial-gradient(circle, #4287f5 0%, #0d1b3f 80%);
}

.rarity-epic {
  background: radial-gradient(circle, #9b30ff 0%, #2e003e 80%);
}

.rarity-legendary {
  background: radial-gradient(circle, #ff9f00 0%, #3f2200 80%);
}

@keyframes spin {
  to {
    transform: rotate(360deg);
  }
}

@keyframes heartbeat {
  0%,
  100% {
    transform: scale(1);
  }
  30% {
    transform: scale(1.02);
  }
  60% {
    transform: scale(1.04);
  }
  80% {
    transform: scale(1.03);
  }
  99% {
    transform: scale(1);
  }
}

.box-container.loading {
  animation: heartbeat 1.8s ease-in-out infinite;
}
/* финальные состояния у тебя уже заданы классами .open / .visible.
   этот класс просто убирает плавность, чтобы «доскакать» мгновенно */
.lid.no-anim,
.card-reveal.no-anim {
  transition: none !important;
  animation: none !important;
}
