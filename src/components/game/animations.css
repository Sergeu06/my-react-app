/* ‚ú¶ –ö–∞—Ä—Ç–æ—á–∫–∞ –ª–µ—Ç–∏—Ç */
@keyframes card-strike-flight {
  0% {
    transform: translate(0px, 0px) scale(1) rotate(0deg);
    filter: brightness(1);
  }
  60% {
    transform: translate(calc(var(--dx, 0px) * 0.9), calc(var(--dy, 0px) * 0.9))
      scale(1.1) rotate(var(--rot, 6deg));
    filter: brightness(1.3) contrast(1.2);
  }
  100% {
    transform: translate(var(--dx, 0px), var(--dy, 0px)) scale(1)
      rotate(var(--rot, 8deg));
    filter: brightness(1);
  }
}
/* ‚ú¶ –•–ª—ë—Å—Ç–∫–∏–π —É–¥–∞—Ä —Å –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–º –Ω–∞–∫–ª–æ–Ω–æ–º –∫ –∞–≤–∞—Ç–∞—Ä—É */
@keyframes card-break {
  0% {
    transform: translate(0, 0) scale(1) rotate(0deg);
    opacity: 1;
  }
  15% {
    /* –±—ã—Å—Ç—Ä—ã–π –Ω–∞–∫–ª–æ–Ω –≤ —Å—Ç–æ—Ä–æ–Ω—É –∞–≤–∞—Ç–∞—Ä–∞ */
    transform: translate(0, 0) scale(1.05) rotate(var(--tilt, 0deg));
    opacity: 1;
  }
  25% {
    /* –≤–µ—Ä–Ω—É–ª–∞—Å—å –≤ "–±–æ–µ–≤—É—é —Å—Ç–æ–π–∫—É" */
    transform: translate(0, 0) scale(1.1) rotate(0deg);
    opacity: 1;
  }
  70% {
    transform: translate(
        calc(var(--dx, 0px) * 0.95),
        calc(var(--dy, 0px) * 0.95)
      )
      scale(1.1) rotate(0deg);
    opacity: 1;
  }
  80% {
    transform: translate(var(--dx, 0px), var(--dy, 0px)) scale(1) rotate(0deg);
    opacity: 1;
  }
  90% {
    transform: translate(calc(var(--dx, 0px) * 0.9), calc(var(--dy, 0px) * 0.9))
      scale(0.95) rotate(-10deg);
    opacity: 0.8;
  }
  100% {
    transform: translate(var(--dx, 0px), var(--dy, 0px)) scale(0.8)
      rotate(30deg);
    opacity: 0;
  }
}

.card-strike {
  position: relative;
  z-index: 99900;
  animation: card-break 500ms cubic-bezier(0.6, -0.3, 0.7, 1.2) forwards;
  will-change: transform, opacity;
}
/* ‚ú¶ –û—Ç–¥–µ–ª—å–Ω–æ–µ –∏—Å—á–µ–∑–Ω–æ–≤–µ–Ω–∏–µ */
@keyframes card-fadeout {
  0% {
    opacity: 1;
  }
  60% {
    opacity: 0.7;
  }
  100% {
    opacity: 0;
  }
}

/* ‚ú¶ –†–µ–∞–∫—Ü–∏—è –∞–≤–∞—Ç–∞—Ä–∞ ‚Äî —É–¥–∞—Ä —Å —Ç—Ä—è—Å–∫–æ–π */
@keyframes avatar-hit-pop {
  0% {
    transform: scale(1) translate(0, 0);
    filter: brightness(1);
  }
  30% {
    transform: scale(1.12) translate(-2px, 1px);
    filter: brightness(1.25);
  }
  60% {
    transform: scale(0.96) translate(2px, -1px);
    filter: brightness(0.9);
  }
  100% {
    transform: scale(1) translate(0, 0);
    filter: brightness(1);
  }
}

/* ‚ú¶ –ê—Ç–∞–∫–∞ DoT: —Ç—É–¥–∞-–æ–±—Ä–∞—Ç–Ω–æ, –±–µ–∑ –∏—Å—á–µ–∑–Ω–æ–≤–µ–Ω–∏—è */
@keyframes card-dot-strike {
  0% {
    transform: translate(0, 0) scale(1) rotate(0deg);
    opacity: 1;
  }
  20% {
    transform: translate(0, 0) scale(1.05) rotate(var(--tilt, 0deg));
    opacity: 1;
  }
  40% {
    transform: translate(0, 0) scale(1.1) rotate(0deg);
    opacity: 1;
  }
  70% {
    transform: translate(
        calc(var(--dx, 0px) * 0.95),
        calc(var(--dy, 0px) * 0.95)
      )
      scale(1.1) rotate(0deg);
    opacity: 1;
  }
  100% {
    /* –≤–æ–∑–≤—Ä–∞—â–µ–Ω–∏–µ –æ–±—Ä–∞—Ç–Ω–æ */
    transform: translate(0, 0) scale(1) rotate(0deg);
    opacity: 1;
  }
}

/* ‚ú¶ –†–µ–∞–∫—Ü–∏—è –∞–≤–∞—Ç–∞—Ä–∞ ‚Äî –º—è–≥–∫–∏–π –ø—É–ª—å—Å –ª–µ—á–µ–Ω–∏—è */
@keyframes avatar-heal-pulse {
  0% {
    transform: scale(1);
    filter: brightness(1);
  }
  40% {
    transform: scale(1.15);
    filter: brightness(1.3) drop-shadow(0 0 18px rgba(0, 255, 128, 0.6));
  }
  70% {
    transform: scale(0.95);
    filter: brightness(1.15) drop-shadow(0 0 10px rgba(0, 255, 128, 0.4));
  }
  100% {
    transform: scale(1);
    filter: brightness(1);
  }
}

.avatar-heal {
  animation: avatar-heal-pulse 500ms ease-out;
}

/* ‚ú¶ –ê–Ω–∏–º–∞—Ü–∏—è –¥–ª—è –∫–∞—Ä—Ç –ª–µ—á–µ–Ω–∏—è ‚Äî –ª–µ—Ç—è—Ç –∫ –∏–≥—Ä–æ–∫—É —Å –º—è–≥–∫–∏–º —Å–≤–µ—á–µ–Ω–∏–µ–º */
@keyframes card-heal-flight {
  0% {
    transform: translate(0, 0) scale(1) rotate(0deg);
    opacity: 1;
    filter: brightness(1) drop-shadow(0 0 0px rgba(0, 255, 128, 0));
  }
  40% {
    transform: translate(calc(var(--dx, 0px) * 0.6), calc(var(--dy, 0px) * 0.6))
      scale(1.15) rotate(var(--rot, -6deg));
    opacity: 1;
    filter: brightness(1.3) drop-shadow(0 0 12px rgba(0, 255, 128, 0.6));
  }
  70% {
    transform: translate(calc(var(--dx, 0px) * 0.9), calc(var(--dy, 0px) * 0.9))
      scale(1.05) rotate(var(--rot, -2deg));
    opacity: 1;
    filter: brightness(1.2) drop-shadow(0 0 18px rgba(0, 255, 128, 0.8));
  }
  100% {
    transform: translate(var(--dx, 0px), var(--dy, 0px)) scale(0.9) rotate(0deg);
    opacity: 0;
    filter: brightness(1) drop-shadow(0 0 0px rgba(0, 255, 128, 0));
  }
}

.card-heal {
  position: relative;
  z-index: 99900;
  animation: card-heal-flight 800ms cubic-bezier(0.55, -0.3, 0.6, 1.3) forwards;
  will-change: transform, opacity, filter;
}

.card-dot-strike {
  position: relative;
  z-index: 99900;
  animation: card-dot-strike 600ms cubic-bezier(0.6, -0.3, 0.7, 1.2) forwards;
  will-change: transform, opacity;
}

.avatar-hit {
  animation: avatar-hit-pop 260ms ease-out;
}

.played-card-wrapper {
  position: relative;
}
.played-card-wrapper.hidden {
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.3s ease-out;
}

.board-center {
  position: absolute;
  top: 0;
  left: 50%;
  transform: translateX(-50%);
  width: min(90vw, 1200px);
  height: 100%;
  display: flex;
  flex-direction: column;
  justify-content: center;
  pointer-events: auto;
  z-index: 5;

  /* üëá –¥–æ–±–∞–≤–ª—è–µ–º –æ—Ç—Å—Ç—É–ø—ã —Å–≤–µ—Ä—Ö—É –∏ —Å–Ω–∏–∑—É */
  padding-top: 24vh; /* –æ–±—Ä–µ–∑–∞—Ç—å –≤–µ—Ä—Ö–Ω–µ–µ –ø–æ–ª–µ */
  padding-bottom: 24vh; /* –æ–±—Ä–µ–∑–∞—Ç—å –Ω–∏–∂–Ω–µ–µ –ø–æ–ª–µ */
  box-sizing: border-box; /* —á—Ç–æ–±—ã padding –Ω–µ –ª–æ–º–∞–ª –≤—ã—Å–æ—Ç—É */
}

/* –ö–∞–∂–¥–∞—è –ø–æ–ª–æ–≤–∏–Ω–∞ ‚Äî —Ä–æ–≤–Ω–æ 50% */
.board-half {
  flex: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  pointer-events: auto; /* –≤–Ω—É—Ç—Ä–∏ –º–æ–∂–Ω–æ –∫–ª–∏–∫–∞—Ç—å */
}

/* –†—è–¥—ã –∫–∞—Ä—Ç */
.board-row {
  display: flex;
  gap: 12px;
}

.board-half.opponent {
  border-bottom: 2px dashed rgba(255, 255, 255, 0.3); /* —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å –ø–æ —Ü–µ–Ω—Ç—Ä—É */
}

.board-half.player {
  border-top: 2px dashed rgba(255, 255, 255, 0.3);
}

.drop-target {
  position: relative;
  transition: background-color 0.2s ease, box-shadow 0.2s ease;
}

.drop-target::before {
  content: "";
  position: absolute;
  inset: 12px;
  border-radius: 18px;
  border: 2px solid transparent;
  opacity: 0;
  transition: opacity 0.2s ease, border-color 0.2s ease,
    box-shadow 0.2s ease;
  pointer-events: none;
}

.drop-target-allowed::before,
.drop-target-allowed-over::before {
  border-color: rgba(90, 255, 140, 0.85);
  box-shadow: 0 0 18px rgba(90, 255, 140, 0.35);
  opacity: 0.75;
}

.drop-target-blocked::before,
.drop-target-blocked-over::before {
  border-color: rgba(255, 92, 92, 0.85);
  box-shadow: 0 0 18px rgba(255, 92, 92, 0.35);
  opacity: 0.75;
}

.drop-target-allowed-over::before,
.drop-target-blocked-over::before {
  opacity: 1;
  box-shadow: 0 0 26px rgba(255, 255, 255, 0.25);
}

.drag-layer {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
  z-index: 50;
}

.drag-layer-inner {
  position: absolute;
  top: 0;
  left: 0;
}

.drag-preview {
  transform: translate(-50%, -50%) scale(1);
  filter: drop-shadow(0 12px 18px rgba(0, 0, 0, 0.35));
}

.drag-preview-card {
  position: relative;
  min-width: 48px;
  width: 18vw;
  max-width: 140px;
  border-radius: 4px;
}

.drag-preview-allowed {
  box-shadow: 0 0 18px rgba(90, 255, 140, 0.4);
}

.drag-preview-blocked {
  box-shadow: 0 0 18px rgba(255, 92, 92, 0.4);
  filter: drop-shadow(0 12px 18px rgba(255, 92, 92, 0.35));
}

/* –°–∫—Ä—ã–≤–∞–µ—Ç –∫–∞—Ä—Ç—É —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ –∞–Ω–∏–º–∞—Ü–∏–∏, –Ω–µ —É–¥–∞–ª—è—è —ç–ª–µ–º–µ–Ω—Ç –∏–∑ DOM */
.card-hidden-after-anim {
  visibility: hidden !important;
  opacity: 0 !important;
  pointer-events: none !important;
  transition: none !important;
  -webkit-transition: none !important;
}

/* –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ: –∑–∞—â–∏—Ç–∏—Ç—å –æ—Ç –≤–æ–∑–º–æ–∂–Ω—ã—Ö transform/animation –≤–æ–∑–≤—Ä–∞—Ç–æ–≤ */
.card-hidden-after-anim,
.card-hidden-after-anim * {
  transform: none !important;
  animation: none !important;
}
